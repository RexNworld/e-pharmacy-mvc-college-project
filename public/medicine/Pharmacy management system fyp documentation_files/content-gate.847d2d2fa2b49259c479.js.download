(self.webpackChunk=self.webpackChunk||[]).push([[8429,7154,6138],{38268:function(e,t,n){"use strict";n.r(t),n.d(t,{slides:function(){return i},slideContainer:function(){return o},slideImages:function(){return r},firstImage:function(){return s},currentImage:function(){return a},playerNavcurrentSlideNumber:function(){return c},stage:function(){return l},progressBar:function(){return d},player:function(){return u},toolbar:function(){return _},fullscreenOverlay:function(){return w},fullscreenOverlayPreviousSlide:function(){return f},cssFullscreenOverlayBackdrop:function(){return h},getSlideSelectorByIndex:function(){return g},TOOLBAR_HEIGHT:function(){return m},SLIDE_MARGIN:function(){return p}});const i=$("#new-player .slide"),o=$("#slide-container"),r=$("#new-player .slide-image"),s=r.first(),a=$("#new-player .slide.current .slide-image"),c=$("#new-player .current-slide-number"),l=$("#new-player #stage"),d=$("#progress-bar"),u=$("#new-player"),_=$("#player-toolbar"),w=$("#player-fullscreen-overlay"),f=$("#player-fullscreen-overlay #overlay-previous-slide"),h=$("#fullscreen-css-backdrop"),g=e=>`#new-player #slide-${e}`,m=50,p=7},86544:function(e,t,n){"use strict";n.r(t);var i=n(20923);t.default=e=>{const t={from_source:e.from_source||"/",initial_view:e.initial_view||"join",slideshow_id:e.slideshow_id,slideshow_key:e.slideshow_key,device_id:"undefined"!=typeof amplitude&&amplitude.getInstance()&&amplitude.getInstance().options?amplitude.getInstance().options.deviceId:"",download:e.isDownload,content_gate:e.isContentGate},n=new FormData;for(let[e,i]of Object.entries(t))i&&n.append(e,i);(0,i.default)().then((e=>fetch("/scribd/authorize",{credentials:"same-origin",headers:{"X-CSRF-Token":e},method:"POST",body:n}).then((e=>e.json())).then((e=>{const t=[];for(let[n,i]of Object.entries(e.params))i&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(i)}`);const n=t.join("&"),i=`${e.url}?${n}`;window.location.href=i}))))}},14408:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(54368);function o(e,t){if(void 0===window.amplitude)return;const n={browserId:(0,i.ej)("browser_id")},o=Object.assign({},t,n);window.amplitude.getInstance().logEvent(e,o)}},52871:function(e,t,n){"use strict";n.r(t),n.d(t,{getSlideshowViewEventOptions:function(){return o},logSlideshowViewed:function(){return s},initializeSlideshowEvents:function(){return c}});var i=n(14408);const o=()=>{const e=window.slideshare_object.slideshow;return{slideshow_id:e.id,slideshow_created_at:e.created_at,slideshow_category:slideshare_object.gam_cat_name,slideshow_language:e.language,slideshow_format:e.type,source:"slideshow_view"}};function r(e){const t=$.extend({},o(),{social:e});(0,i.default)("slideshow_share_interacted",t)}const s=({viewRestrictionState:e,viewRestrictionCounter:t})=>{const n=$.extend({},o(),{slideshow_num_pages:window.slideshare_object.slideshow.total_slides,view_restriction_state:e,view_restriction_counter:t});(0,i.default)("slideshow_viewed",n)},a=e=>{const t=window.slideshare_object.slideshow,n={from_slideshow_id:t.id,from_slideshow_created_at:t.created_at,from_slideshow_category:slideshare_object.gam_cat_name,from_slideshow_language:t.language,from_slideshow_format:t.type,source:"slideshow_view",to_slideshow_id:e.currentTarget.dataset.recId,recommendation_location:e.currentTarget.dataset.index,recommendation_source:e.currentTarget.dataset.sourceName,recommendation_type:e.currentTarget.dataset.recommendationType,recommendation_module_position:e.currentTarget.dataset.recommendationModulePosition};(0,i.default)("slideshow_recommendation_click",n)},c=()=>{window.addEventListener("DOMContentLoaded",(()=>{$(".facebook .share-link").click((function(){r("facebook")})),$(".twitter .share-link").click((function(){r("twitter")})),$(".linkedin .share-link").click((function(){r("linkedin")})),$(".j-share-embed").click((function(){r("embed")})),$(".wordpress-container").click((function(){r("wordpress")})),$(".share-link-container").click((function(){r("link")})),$(".slideshow-action .share").click((function(){(0,i.default)("slideshow_share_initiated",o())})),$(".clip-button").click((function(e){e.preventDefault(),e.stopPropagation(),(0,i.default)("slideshow_clipped",o())})),$("#mobile-clip-button").click((function(){(0,i.default)("slideshow_clipped",o())})),$(".clipping-indicator.top-clip").click((function(){(0,i.default)("slideshow_jumped_to_clip",o())})),$(".carousel-link").click(a),$(".j-related-impression").click(a)}))}},54368:function(e,t,n){"use strict";n.d(t,{jg:function(){return r},vp:function(){return s},ej:function(){return a},T2:function(){return c}});const i=(e,t)=>{if(t.append("authenticity_token",$('meta[name="csrf-token"]').attr("content")),navigator.sendBeacon)try{navigator.sendBeacon(e,t)}catch{console.warn(`Failed to send tracking event to ${e}`)}else $.ajax({url:e,data:t,processData:!1,contentType:!1,type:"POST",success:function(t){t&&!t.success&&console.warn(`Failed to send tracking event to ${e}`)}})},o=e=>{const t=new FormData;return Object.keys(e).forEach((n=>{t.append(n,JSON.stringify(e[n]))})),t},r=(e,t)=>{i("/frontend_tracking/track_event",o({event_name:e,event_body:t}))},s=e=>{i("/frontend_tracking/track_batch",o({events:e}))},a=e=>{if(document.cookie){const t=document.cookie.split("; ").find((t=>t.startsWith(`${e}=`)));return t?t.split("=")[1]:""}return""},c=()=>window.slideshare_object&&window.slideshare_object.slideshow&&window.slideshare_object.slideshow.id||"-1"},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},78846:function(e,t,n){("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"1b643a431d416214328972468cb8ca1e38320094"}},89994:function(e,t,n){"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.trackView=t.showLimitOverlay=t.logViewRestrictionEvent=t.isRevisit=t.hideLimitOverlay=t.handleBannerNotification=t.getShouldShowReaderBlur=t.getShouldShowBannerNotificationsUX=t.getIsValidIsoDate=t.getContentGateDataFromStorage=t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=void 0;var o=n(63911),r=n(97695),s=i(n(14408)),a=i(n(86544)),c=n(38268);t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=5,t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=2;const l="contentGateV3",d=()=>{let e=(0,o.loadFromStorage)(l);return Array.isArray(e.documents)||(e.documents=[]),e.documents};t.getContentGateDataFromStorage=d,t.isRevisit=e=>{const t=d(),n=t.findIndex((t=>t.id===e));return n>-1&&t[n].revisitAllowed},t.trackView=e=>{let t=d();const n=new Date((0,r.getDateNow)().getTime()-2592e6).toISOString();return t=t.filter(_).filter((e=>e.at>n)),-1===t.findIndex((t=>t.id===e))&&(t.length>=5?t.push({id:e,at:(0,r.getDateNow)(),revisitAllowed:!1}):t.push({id:e,at:(0,r.getDateNow)(),revisitAllowed:!0})),(0,o.saveToStorage)(l,{documents:t}),t.length};const u=e=>!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(e)&&new Date(e).toISOString()===e;function _(e){return!!(n=e.id)&&"string"==typeof n&&!!(t=e.at)&&u(t);var t,n}t.getIsValidIsoDate=u,t.getShouldShowBannerNotificationsUX=(e,t,n)=>({shouldShowBanner:e-t<=n,remainingDocCount:e-t}),t.getShouldShowReaderBlur=(e,t)=>t>e,t.logViewRestrictionEvent=e=>{const t=6===e;3===e&&(0,s.default)("view_restriction_banner_shown"),t&&(0,s.default)("view_restriction_threshold_hit")};const w=()=>{const e=window.slideshare_object,t=e&&e.slideshow;(0,a.default)({from_source:`${t.ss_url}?subscription_success_banner=show`,slideshow_id:t.id,isContentGate:!0})};t.handleBannerNotification=(e,t)=>{const n=$(".limit-notification"),i=n.find("#notification-warning-text");i.empty(),i.append(((e,t)=>{const n=t.utils;return e<0?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_ran_out_text"):0===e?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_last_document_text"):n.i18n("slideshow.foundation_slideview.limit_content_without_accoun.notification_banner_text",{count:e})})(e,t)),n.find("#notification-warning-link").on("click",w),n.css("opacity",0).slideDown(400).animate({opacity:1},{queue:!1,duration:400})},t.showLimitOverlay=()=>{const e=$(".limit-overlay");e.find("#sign-up-with-scribd").on("click",w),e.css("display",""),c.player.addClass("guest-limit")},t.hideLimitOverlay=()=>{$(".limit-overlay").css("display","none"),c.player.removeClass("guest-limit")}},32591:function(e,t,n){"use strict";var i=n(89994),o=n(38268),r=n(63911),s=n(52871);function a(e){const t=i.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION-i.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS;return e<t?"unrestricted":e>=t&&e<=i.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION?"warning":"restricted"}window.addEventListener("DOMContentLoaded",(()=>{const e=window.slideshare_object,t=e&&e.slideshow,n=function(e){if(!window.feature_flags.viewRestrictionWithoutSubscriptionAfterFive||!e)return(0,s.logSlideshowViewed)({viewRestrictionState:null,viewRestrictionCounter:null}),!1;if(!(0,r.isLocalStorageEnabled)())return(0,s.logSlideshowViewed)({viewRestrictionState:"not supported",viewRestrictionCounter:null}),!1;if(!e.view_restriction_eligible)return(0,s.logSlideshowViewed)({viewRestrictionState:"unrestricted",viewRestrictionCounter:null}),!1;if((0,i.isRevisit)(e.id)){const e=(0,i.getContentGateDataFromStorage)().length;return(0,s.logSlideshowViewed)({viewRestrictionState:"revisit",viewRestrictionCounter:e}),!1}return!0}(t);if(n){const e=(0,i.trackView)(t.id);(0,i.logViewRestrictionEvent)(e),(0,s.logSlideshowViewed)({viewRestrictionState:a(e),viewRestrictionCounter:e}),function(e){const t=window.slideshare_object,{shouldShowBanner:n,remainingDocCount:r}=(0,i.getShouldShowBannerNotificationsUX)(i.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION,e,i.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS),s=(0,i.getShouldShowReaderBlur)(i.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION,e);n&&(0,i.handleBannerNotification)(r,t),s&&o.player.attr("data-shouldblurreader",s)}(e)}}))},20923:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");if(null!==n)return n;let t=await fetch("/csrf_token",{credentials:"same-origin",method:"GET"});if(!t.ok)throw new Error(`csrf token http error: ${t.status}`);return t=await t.json(),n=t.csrf_token,n};let n=null},97695:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDateNow=void 0,t.getDateNow=()=>new Date},63911:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveToStorage=t.loadFromStorage=t.isLocalStorageEnabled=void 0;let n=null;const i=()=>{if(null!==n)return n;try{return window.localStorage.setItem("slideshare_test","test"),window.localStorage.removeItem("slideshare_test"),n=!0,n}catch(e){return n=!1,n}};t.isLocalStorageEnabled=i,t.loadFromStorage=e=>i()?JSON.parse(window.localStorage.getItem(e)||"{}"):null,t.saveToStorage=(e,t)=>{if(!i())return null;window.localStorage.setItem(e,JSON.stringify(t))}}},function(e){var t=function(t){return e(e.s=t)};t(78846),t(32591)}]);
//# sourceMappingURL=content-gate.847d2d2fa2b49259c479.js.map